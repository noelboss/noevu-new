---
import type { CertificationBadgeSection, Theme } from '../../schemas/sections';

interface Props {
  data: CertificationBadgeSection;
  theme?: Theme;
}

const { data, theme } = Astro.props;
const { badge, title, description, link, inline = false } = data;

const sectionClass = inline ? 'certification-badge--inline' : '';
---

<section class={`certification-badge section--sm ${sectionClass}`} data-theme={theme}>
  <div class="container">
    <div class="certification-badge__content">
      {link ? (
        <a
          href={link}
          class="certification-badge__link"
          target="_blank"
          rel="noopener noreferrer"
          aria-label={title || badge.alt}
        >
          <img
            src={badge.src}
            alt={badge.alt}
            width={badge.width}
            height={badge.height}
            class="certification-badge__image"
            loading="lazy"
          />
        </a>
      ) : (
        <img
          src={badge.src}
          alt={badge.alt}
          width={badge.width}
          height={badge.height}
          class="certification-badge__image"
          loading="lazy"
        />
      )}

      {(title || description) && (
        <div class="certification-badge__text">
          {title && (
            <h3 class="certification-badge__title">
              {link ? (
                <a href={link} target="_blank" rel="noopener noreferrer">
                  {title}
                </a>
              ) : (
                title
              )}
            </h3>
          )}
          {description && (
            <p class="certification-badge__description">{description}</p>
          )}
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .certification-badge {
    background-color: var(--theme-bg);
    color: var(--theme-text);
  }

  .certification-badge__content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-6);
    text-align: center;
  }

  /* Inline variant - horizontal layout */
  .certification-badge--inline .certification-badge__content {
    flex-direction: row;
    text-align: left;
    justify-content: center;
  }

  @media (max-width: 767px) {
    .certification-badge--inline .certification-badge__content {
      flex-direction: column;
      text-align: center;
    }
  }

  .certification-badge__link {
    display: block;
    transition: transform var(--transition), opacity var(--transition);
  }

  .certification-badge__link:hover {
    transform: scale(1.05);
    opacity: 0.9;
  }

  .certification-badge__image {
    max-width: 200px;
    height: auto;
    border-radius: var(--radius);
  }

  .certification-badge--inline .certification-badge__image {
    max-width: 120px;
  }

  .certification-badge__text {
    max-width: 400px;
  }

  .certification-badge__title {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--theme-heading);
    margin-bottom: var(--space-2);
  }

  .certification-badge__title a {
    color: inherit;
    text-decoration: none;
    transition: color var(--transition);
  }

  .certification-badge__title a:hover {
    color: var(--theme-accent);
  }

  .certification-badge__description {
    font-size: var(--text-base);
    color: var(--theme-text-muted);
    line-height: var(--leading-relaxed);
  }
</style>
