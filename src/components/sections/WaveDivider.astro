---
import type { WaveDividerSection, Theme } from '../../schemas/sections';

interface Props {
  data: WaveDividerSection;
  theme?: Theme;
}

const { data } = Astro.props;
const { topColor = 'beige', bottomColor = 'green', topTheme, bottomTheme, height = 'medium' } = data;

// Theme to color mapping - maps theme names to CSS custom properties
const themeColorMap: Record<Theme, string> = {
  'dark': 'var(--color-primary)',
  'white': 'var(--color-bg-white)',
  'white-bold': 'var(--color-bg-white)',
  'bright-inverse': 'var(--color-accent)',
  'bright': 'var(--color-accent)',
  'light-bold': 'var(--color-bg-beige)',
  'black-bold': 'var(--color-text)',
  'black': 'var(--color-text)',
  'light': 'var(--color-bg-beige)',
  'dark-bold': 'var(--color-primary)',
};

// Legacy color mapping for backward compatibility
const colorMap: Record<string, string> = {
  beige: 'var(--color-bg-beige)',
  white: 'var(--color-bg-white)',
  green: 'var(--color-primary)',
  cream: 'var(--color-bg-cream)',
};

const heightMap: Record<string, string> = {
  small: '60px',
  medium: '100px',
  large: '150px',
};

// Use theme values when available, otherwise fall back to color values
const topColorValue = topTheme ? themeColorMap[topTheme] : (colorMap[topColor] || colorMap.beige);
const bottomColorValue = bottomTheme ? themeColorMap[bottomTheme] : (colorMap[bottomColor] || colorMap.green);
const heightValue = heightMap[height] || heightMap.medium;
---

<div
  class="wave-divider"
  style={`--wave-top: ${topColorValue}; --wave-bottom: ${bottomColorValue}; --wave-height: ${heightValue};`}
  aria-hidden="true"
>
  <svg
    viewBox="0 0 1440 100"
    preserveAspectRatio="none"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0 100V20C240 60 480 80 720 60C960 40 1200 0 1440 20V100H0Z"
      fill="currentColor"
    />
  </svg>
</div>

<style>
  .wave-divider {
    position: relative;
    width: 100%;
    height: var(--wave-height);
    background-color: var(--wave-top);
    overflow: hidden;
    line-height: 0;
  }

  .wave-divider svg {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    color: var(--wave-bottom);
  }
</style>
