---
interface Props {
  title: string;
  slug: string;
  excerpt: string;
  featuredImage?: string;
  categories?: string[];
  publishedAt: string;
  author?: {
    name: string;
    image?: string;
  };
  readingTime?: number;
}

const {
  title,
  slug,
  excerpt,
  featuredImage,
  categories = [],
  publishedAt,
  author,
  readingTime,
} = Astro.props;

// Format date for German locale
const formattedDate = new Date(publishedAt).toLocaleDateString('de-CH', {
  day: '2-digit',
  month: 'short',
  year: '2-digit',
});
---

<article class="blog-card">
  <a href={`/blog/${slug}`} class="blog-card__link">
    {featuredImage && (
      <div class="blog-card__image">
        <img src={featuredImage} alt={title} loading="lazy" />
      </div>
    )}

    <div class="blog-card__content">
      {categories.length > 0 && (
        <div class="blog-card__categories">
          {categories.slice(0, 2).map((category) => (
            <span class="blog-card__category">{category}</span>
          ))}
        </div>
      )}

      <h3 class="blog-card__title">{title}</h3>

      <p class="blog-card__excerpt">{excerpt}</p>

      <div class="blog-card__footer">
        <span class="blog-card__read-more">
          Mehr lesen
          <svg class="blog-card__arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 8H13M13 8L9 4M13 8L9 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <div class="blog-card__meta">
          <time class="blog-card__date" datetime={publishedAt}>
            {formattedDate}
          </time>
          {readingTime && (
            <span class="blog-card__reading-time">Â· {readingTime} Min.</span>
          )}
        </div>
      </div>
    </div>
  </a>
</article>

<style>
  /* Blog Card - Glass morphism style matching original noevu.ch */
  .blog-card {
    /* Glass effect background */
    background-color: hsla(var(--color-white-hsl), 0.75);
    backdrop-filter: blur(5px);
    border-radius: calc(var(--radius-lg) * 2);
    overflow: hidden;
    padding: 10px;
    cursor: pointer;
    height: 100%;
    display: flex;
    flex-direction: column;
    min-width: 280px;

    /* Glass shadows - matching original */
    box-shadow:
      inset 5px 0 20px 0 hsla(var(--color-white-hsl), 0.5),
      inset 0 -30px 30px 0 hsla(var(--color-white-hsl), 0.5);

    transition: all var(--transition-slow);
  }

  .blog-card:hover {
    background-color: hsla(var(--color-white-hsl), 0.9);
    backdrop-filter: blur(6px);
    box-shadow:
      inset 0 0 20px 0 hsla(var(--color-white-hsl), 0.75),
      inset 10px -30px 20px 0 hsla(var(--color-white-hsl), 0.5),
      0 10px 40px -10px hsla(var(--color-green-hsl), 0.15);
  }

  /* Link wrapper */
  .blog-card__link {
    display: flex;
    flex-direction: column;
    height: 100%;
    text-decoration: none;
    color: inherit;
  }

  /* Featured image */
  .blog-card__image {
    aspect-ratio: 16 / 10;
    overflow: hidden;
    border-radius: var(--radius-lg);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    flex-shrink: 0;
  }

  .blog-card__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-slow);
  }

  .blog-card:hover .blog-card__image img {
    transform: scale(1.03);
  }

  /* Content area */
  .blog-card__content {
    padding: var(--space-8);
    padding-top: var(--space-6);
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    /* Content background - slightly tinted */
    background-color: hsla(var(--color-white-hsl), 0.5);
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    transition: background-color var(--transition-slow);
  }

  .blog-card:hover .blog-card__content {
    background-color: hsla(var(--color-white-hsl), 0.65);
  }

  /* Category pills - tag style */
  .blog-card__categories {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
  }

  .blog-card__category {
    /* Tag pill style - matching original */
    font-family: var(--font-sans);
    font-size: 14px;
    font-weight: var(--font-normal);
    line-height: 1.3;
    padding: 4px 12px;
    border-radius: 100px;
    display: inline-flex;
    align-items: center;

    /* Tag colors */
    color: hsla(var(--color-green-hsl), 0.75);
    background-color: hsla(var(--color-green-hsl), 0.1);
    backdrop-filter: blur(10px);

    transition: background var(--transition), color var(--transition);
  }

  .blog-card:hover .blog-card__category {
    background-color: hsla(var(--color-green-hsl), 0.15);
    color: hsla(var(--color-green-hsl), 1);
  }

  /* Title with gradient text - matching original */
  .blog-card__title {
    font-family: var(--font-heading);
    font-size: clamp(20px, 2vw, 24px);
    font-weight: var(--font-normal);
    line-height: var(--leading-snug);
    margin-bottom: var(--space-3);

    /* Gradient text matching original */
    background: linear-gradient(120deg, var(--color-primary) 0.26%, var(--color-neutral-600) 118%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;

    transition: all var(--transition);
  }

  .blog-card:hover .blog-card__title {
    background: linear-gradient(120deg, var(--color-primary-600) 0%, var(--color-neutral-700) 100%);
    -webkit-background-clip: text;
    background-clip: text;
  }

  /* Excerpt with line clamping */
  .blog-card__excerpt {
    font-family: var(--font-sans);
    font-size: var(--text-base);
    color: var(--color-text-muted);
    line-height: var(--leading-relaxed);
    margin-bottom: var(--space-6);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
  }

  /* Footer with read more and meta */
  .blog-card__footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
    margin-top: auto;
    padding-top: var(--space-4);
    border-top: 1px solid hsla(var(--color-green-hsl), 0.1);
  }

  /* Read more link with arrow */
  .blog-card__read-more {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--color-primary);
    transition: color var(--transition-fast);
  }

  .blog-card:hover .blog-card__read-more {
    color: var(--color-primary-600);
  }

  .blog-card__arrow {
    width: 1rem;
    height: 1rem;
    transition: transform var(--transition-fast);
    flex-shrink: 0;
  }

  .blog-card:hover .blog-card__arrow {
    transform: translateX(4px);
  }

  /* Meta info - tag style */
  .blog-card__meta {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    flex-shrink: 0;
    /* Tag style for date/reading time */
    font-size: 14px;
    padding: 4px 12px;
    border-radius: 100px;
    background-color: hsla(var(--color-green-hsl), 0.1);
  }

  .blog-card__date {
    font-family: var(--font-sans);
    font-size: inherit;
    color: hsla(var(--color-green-hsl), 0.75);
  }

  .blog-card__reading-time {
    font-family: var(--font-sans);
    font-size: inherit;
    color: hsla(var(--color-green-hsl), 0.75);
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .blog-card {
      padding: 8px;
    }

    .blog-card__content {
      padding: var(--space-5);
    }

    .blog-card__title {
      font-size: var(--text-lg);
    }

    .blog-card__footer {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-3);
    }
  }
</style>
